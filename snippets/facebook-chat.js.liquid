const OMGFBGetAddCartForms='form[action*="/cart/add"]:not(.ssw-hide)',OMGFBGetCheckoutForm=(t="",e="")=>[`${t} form[action="/cart"]${e}`,`${t} form#cart${e}`,`${t} form#checkout_submit${e}`,`${t} form[action="/checkout"]${e}`].join(",");function OMGFBGetAddCartButton(t){const e=t,o=["#buy_it_now","#AddToCart","#add-to-cart",".btn-cart",".btn-addCart","#add",".add","#add_product","#product-add-to-cart",".button--add-to-cart"],a=["#addToCartCopy"],n=["Buy","Purchase","Add","Order","Comprar"],i=["button","a","div","span"];let s,c,r,l,d;for(c=0,r=a.length;c<r&&(s=e.find(a[c]),!s.length);c++);if(!s.length)for(c=0,r=o.length;c<r&&(s=e.find(o[c]+'[type="submit"]'),!s.length);c++);if(s.length||(s=e.find('input[type="submit"], button[type="submit"]')),!s.length)for(c=0,r=o.length;c<r&&(s=e.find(o[c]),!s.length);c++);if(!s.length)t:for(l=0,d=i.length;l<d;l++)for(c=0,r=n.length;c<r;c++)if(s=e.find(`${i[l]}:contains("${n[c]}")`).not(':contains("login")'),s.length||(s=e.find(`${i[l]}:contains("${n[c].toUpperCase()}")`).not(':contains("login")'),s.length||(s=e.find(`${i[l]}:contains("${n[c].toLowerCase()}")`).not(':contains("login")'))),s.length)break t;return s}window.OMGFBJquery=null;let windowWidth=0,isCallEventFb=!1,checkOldVersion=!1,tokenId=localStorage.getItem(shopFbChat+"_omgfbc_tokenId");if(tokenId||(tokenId=makeid(24),localStorage.setItem(shopFbChat+"_omgfbc_tokenId",tokenId)),!window.OMGChatIsLiquidFile){const t=document.getElementsByTagName("head")[0];let e=document.createElement("link");e.href=`${rootLinkChat}client/omg-facebook-chat_style.css?v=${Math.floor(Date.now()/1e3)}`,e.type="text/css",e.rel="stylesheet",t.appendChild(e)}const isDefaultMode="default"===facebookChatSettings.display_mode,appIdFB=facebookChatSettings.appIdFB?facebookChatSettings.appIdFB:"1919748194980000";let uniqueRef="";const refAddCartWidget=`${tokenId}_${shopFbChat}_add-cart-widget_${makeid(24)}`,refCustomerChat=`${tokenId}_${shopFbChat}_customer-chat_${makeid(24)}`;let isNotAvailableWork=!1;window.OMGFBisGetPopup="";const dataConvertString=["page_info","specific_pages","exclude_pages","working_time","custom_css","weekdays","abTests"];for(let t of dataConvertString)facebookChatSettings[t]&&"string"==typeof facebookChatSettings[t]&&(facebookChatSettings[t]=JSON.parse(facebookChatSettings[t]));var addCartWidgetSettings=facebookChatSettings.addCartWidget;function makeid(t){for(var e="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=o.length,n=0;n<t;n++)e+=o.charAt(Math.floor(Math.random()*a));return e}async function createFacebookChat(t){if(uniqueRef="product"===__st.p?`OMGFBChat_${tokenId}_${makeid(24)}_${__st.rid}`:`OMGFBChat_${tokenId}_${makeid(24)}`,OMGFBJquery=t,0==facebookChatSettings.app_status||checkOldVersion)return;windowWidth=document.body.clientWidth;let e="";if(0===OMGFBJquery("body #fb-root").length&&(e+="<div id='fb-root'></div>"),OMGFBJquery(".otFacbookChat").append(e),!facebookChatSettings.hasOwnProperty("enable_fb_chat_btn")||facebookChatSettings.enable_fb_chat_btn&&1==facebookChatSettings.enable_fb_chat_btn){const t=facebookChatSettings.theme_color,e=facebookChatSettings.greeting_message.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"),o=facebookChatSettings.page_info,a=window.location.protocol+"//"+window.location.host+"/"+window.location.pathname+window.location.search,n="1"==facebookChatSettings.auto_display?"show":"hide",i=1==facebookChatSettings.show_greeting_message?`greeting_dialog_display='${n}'`:"";OMGFBJquery("#fb-root").append(`\n            <div class='fb-customerchat OMG-FB-Chat'\n                    attribution='setup_tool'\n                    fb-xfbml-state='rendered'\n                    page_id='${o.id}'\n                    themeColor='${t}'\n                    logged_in_greeting="${e}"\n                    logged_out_greeting="${e}"\n                    rel='${a}'\n                    ref="${refCustomerChat}"\n                    ${i}\n                >\n            </div> \n        `)}let o=0;const a=setInterval(()=>{o+=1,o>5e3&&clearInterval(a),OMGFBJquery(".otFacbookChat #fb-root").length&&!isCallEventFb&&(callInitFaceBook(),clearInterval(a))});if(0==parseInt(facebookChatSettings.show_after))setTimeCreateChat();else{const t=parseInt(facebookChatSettings.show_after)>5?1e3*parseInt(facebookChatSettings.show_after):5e3;OMGFBJquery("#fb-root").addClass("ot-fb-hide"),setTimeout((function(){OMGFBJquery("#fb-root").removeClass("ot-fb-hide"),setTimeCreateChat()}),t)}if(OMGFBJquery(document).on("click",".fb_dialog.fb_dialog_mobile iframe",(function(t){if(windowWidth<800&&"1"==facebookChatSettings.chat_type){let t=facebookChatSettings.page_info.id;window.open("https://www.messenger.com/t/"+t,"_blank")}})),"product"===__st.p&&addCartWidgetSettings){const t=OMGFBGetAddCartButton(OMGFBJquery(OMGFBGetAddCartForms)),e=1==addCartWidgetSettings.center_align;let o="<style>";e&&(o+='.ot-addcart-widget-notion, .ot-addcart-widget [center_align="true"]{\n                        text-align: center;\n                    }\n                '),"dark"==addCartWidgetSettings.color&&(o+="\n                .ot-addcart-widget{\n                    background: #000;\n                    color: #fff;\n                }\n            "),"standard"==addCartWidgetSettings.size&&(o+="\n                .ot-addcart-widget-notion{\n                    font-size: 14px;;\n                }\n            ");const a=0==addCartWidgetSettings.smart_display;o+=`</style>\n                <div class="ot-addcart-widget" style="opacity:0">\n                    <div class="fb-messenger-checkbox fb_iframe_widget"\n                        origin="https://${shopFbChat}"\n                        page_id='${facebookChatSettings.page_info.id}'\n                        messenger_app_id='${appIdFB}'\n                        user_ref="${uniqueRef}"\n                        allow_login="${a}"\n                        size="${addCartWidgetSettings.size}"\n                        skin="${addCartWidgetSettings.color}"\n                        center_align="${e}"\n                        ref="${refAddCartWidget}"\n                    >\n                    </div>\n                    <div class="ot-addcart-widget-notion">${addCartWidgetSettings.text_subscribed}</div>\n                </div>`,t.after(o)}let n=OMGFBGetCheckoutForm();if(OMGFBJquery(n).length){let t="";if(addCartWidgetSettings&&1==addCartWidgetSettings.status){t+=`<input name="attributes[omgFbChatTokenId]" type="hidden" value="${tokenId}" />`;let e=await getCartInfoData(),o=shopFbChat+"_omgFbChatListProductChecked",a=localStorage.getItem(o)?JSON.parse(localStorage.getItem(o)):[],n="";for(let t of a)if(e.items.find(e=>e.product_id==t)){n=tokenId;break}n.length&&(t+=`<input name="attributes[omgFbChatCheckboxTokenId]" type="hidden" value="${tokenId}" />`)}if(1==facebookChatSettings.enable_abandoned_campaign){let e=localStorage.getItem(shopFbChat+"_omgfbc_deTokenId");e&&(t+=`<input name="attributes[omgFbChatDeTokenId]" type="hidden" value="${e}" />`),t+=`<input name="attributes[omgFbChatTokenId]" type="hidden" value="${tokenId}" />`}t.length&&OMGFBJquery(n).append(t)}1==facebookChatSettings.enable_abandoned_campaign&&initAjaxCart()}function initAjaxCart(){const t=async(t,e)=>{if([window.location.origin+"/wallets/checkouts.json","/checkouts.json"].includes(t)){updateCheckoutAttribute((await e.clone().json()).checkout)}};var e,o;e=window,"function"==typeof(o=window.fetch)&&(e.fetch=function(){const e=o.apply(this,arguments);return e.then(e=>{t(e.url,e)}),e});const a=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(){return this.addEventListener("load",(function(){try{t(this._url,JSON.parse(this.response))}catch(t){return!1}})),a.apply(this,arguments)}}function getCartInfoData(){return new Promise((function(t,e){OMGFBJquery.ajax({type:"GET",url:"/cart.js",dataType:"json",success:function(e){t(e)},error:function(t){e(t)}})}))}function updateCheckoutAttribute(t){let e="",o=shopFbChat+"_omgFbChatListProductChecked",a=localStorage.getItem(o)?JSON.parse(localStorage.getItem(o)):[];for(let o of a)if(t.line_items.find(t=>t.product_id==o)){e=tokenId;break}return new Promise((function(o,a){OMGFBJquery.ajax({url:rootLinkChat+"backend/storefront/facebook-message.php",data:{action:"updateCheckout",checkoutToken:t.token,attributes:{omgFbChatCheckboxTokenId:e,omgFbChatTokenId:tokenId},shop:shopFbChat},dataType:"JSON",type:"POST"})}))}function iconChatClickAvailable(){let t=0,e=!1;const o=setInterval(()=>{let a=OMGFBJquery(".fb-customerchat.fb_invisible_flow.fb_iframe_widget iframe");t++,t>40&&clearInterval(o),a.length&&!e&&(windowWidth>1025&&(e=!0,"1"==facebookChatSettings.auto_display?a.addClass("fb_customer_chat_bounce_in_v2"):a.addClass("fb_customer_chat_bounce_out_v2")),windowWidth<=1025&&"100%"===a.css("max-height")&&(e=!0,a.css("max-height","0"),setTimeout(()=>{a.css("max-height","0")},300))),windowWidth>1025&&a.length&&a.hasClass("fb_customer_chat_bounce_in_v2")&&"0"==facebookChatSettings.auto_display&&(a.removeClass("fb_customer_chat_bounce_in_v2"),clearInterval(o))},50);let a=windowWidth;OMGFBJquery(window).resize(()=>{OMGFBJquery(window).width()!=a&&(a=document.body.clientWidth)}),setInterval(()=>{let t=OMGFBJquery(".fb-customerchat.fb_invisible_flow.fb_iframe_widget iframe");if(t.length){t=OMGFBJquery(".fb-customerchat.fb_invisible_flow.fb_iframe_widget iframe");let e=t.width()||400;OMGFBJquery(".fb-customerchat.fb_invisible_flow.fb_iframe_widget iframe[class*=fb_customer_chat_bounce_in]").length&&t.removeClass("fb_customer_chat_bounce_out_v2"),t.css("width")&&(e=parseInt(t.css("width"),10));const o=(a-e)/100*parseInt(facebookChatSettings.position);t.css("left",o)}},500),OMGFBJquery(document).on("click",".ot-fb-logo",(function(){processFbBoxChat()}))}function iconChatClickUnavailable(){if(!("messOpt"===facebookChatSettings.working_time.not_available_option&&windowWidth<=1025)){if("messOpt"!==facebookChatSettings.working_time.not_available_option){const t=setInterval(()=>{OMGFBJquery("#fb-root").length&&(OMGFBJquery(".ot-fb-logo").css("z-index","99999999999999"),OMGFBJquery("#fb-root .fb_iframe_widget iframe").addClass("ot-fb-hide"),clearInterval(t))},50)}isDefaultMode&&OMGFBJquery(".otFacbookChat").append('<div class="facebook-chat-button-custom"></div>'),OMGFBJquery(document).on("click",".ot-fb-logo, .facebook-chat-button-custom",(function(){OMGFBJquery(".available-work-container").hasClass("ot-fb-hide")?OMGFBJquery(".fb-customerchat.fb_invisible_flow.fb_iframe_widget iframe").hasClass("fb_customer_chat_bounce_in_v2")&&"messOpt"===facebookChatSettings.working_time.not_available_option?processFbBoxChat("not-available"):OMGFBJquery(".available-work-container").removeClass("ot-fb-hide").addClass("ot-fb-flex"):closeNotAvailableOpt()}))}}function setTimeCreateChat(){if(facebookChatSettings.page_target&&"0"!==facebookChatSettings.page_target){const t=window.location.pathname;let e="";if("/"===t)e="template-index";else if(t.startsWith("/collections/"))e="template-collection";else if(t.startsWith("/products/"))e="template-product";else if(t.startsWith("/cart"))e="template-cart";else if(t.startsWith("/search"))e="template-search";else if(t.startsWith("/pages/")){e=t.replace("/pages/","")}if("1"===facebookChatSettings.page_target){if(facebookChatSettings.specific_pages.indexOf(e)<0)return OMGFBJquery("#fb-root").addClass("ot-fb-hide"),void console.log("Not specifics page")}else if("2"===facebookChatSettings.page_target){if(facebookChatSettings.exclude_pages.indexOf(e)>=0)return OMGFBJquery("#fb-root").addClass("ot-fb-hide"),void console.log("excludes page")}}let t="";if("2"===facebookChatSettings.status_connect&&(t=makeHtml(),makeSettingsCustomerChat()),!facebookChatSettings.hasOwnProperty("enable_fb_chat_btn")||facebookChatSettings.enable_fb_chat_btn&&1==facebookChatSettings.enable_fb_chat_btn){OMGFBJquery(".otFacbookChat").append(t);facebookChatSettings.position>50?OMGFBJquery(".icon-text-content").addClass("icon-text-content-left"):OMGFBJquery(".icon-text-content").addClass("icon-text-content-right"),getStyleCustom(),OMGFBJquery(window).resize(()=>{OMGFBJquery(window).width()!=windowWidth&&getStyleCustom(document.body.clientWidth)}),"0"==facebookChatSettings.auto_display&&windowWidth>1024&&"default"!==facebookChatSettings.display_mode&&OMGFBJquery("#fb-root").addClass("ot-fb-hide");const e=setInterval(()=>{(isDefaultMode&&OMGFBJquery(".fb_dialog_content iframe").height()>0||!isDefaultMode&&OMGFBJquery(".ot-fb-logo .ot-fb-icon").height()>0)&&(trackingFrontWidgetCampaign("show_IconFbLiveChat"),clearInterval(e))},1e3)}}function makeHtml(){const t=facebookChatSettings.theme_color,e=facebookChatSettings.icon_type;let o=windowWidth>=1025?facebookChatSettings.icon_text:"";const a=facebookChatSettings.icon_text_color,n=facebookChatSettings.tab_color,i=facebookChatSettings.tab_size,s=facebookChatSettings.tab_style,c=o?"has_text":"none_text";let r="28px";"medium"==i?r="32px":"large"==i&&(r="36px");const l=`color: ${a}; background-color: ${n}; line-height: ${r};`,d=iconHtml?""+iconHtml[e]:"",f=`<span  style='${l}' class='ml-1 icon-text-content'> ${o}</span>`,g="1"==facebookChatSettings.chat_type?"redirect_icon":"";let b="",h="";isDefaultMode||(h=`<div class='ot-fb-logo ${g} facebook-chat-button ${i} ${s} ${c}' style='${"one_box"==s?"background-color: "+n+";":""}'>\n            <div class='ot-fb-icon' style='background-color: ${n}; fill: ${a};'>\n            ${d}\n            </div>\n            ${f}\n        </div>`),isDefaultMode&&1==facebookChatSettings.chat_type&&windowWidth<1025&&(h=`\n            <div class='ot-fb-logo ${g} facebook-chat-button'>\n                <svg x="0" y="0" width="60px" height="60px">\n                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                        <g>\n                            <circle fill="${t}" cx="30" cy="30" r="30"></circle>\n                            <svg x="10" y="10">\n                                <g transform="translate(0.000000, -10.000000)" fill="#FFFFFF">\n                                    <g id="logo" transform="translate(0.000000, 10.000000)">\n                                        <path d="M20,0 C31.2666,0 40,8.2528 40,19.4 C40,30.5472 31.2666,38.8 20,38.8 C17.9763,38.8 16.0348,38.5327 14.2106,38.0311 C13.856,37.9335 13.4789,37.9612 13.1424,38.1098 L9.1727,39.8621 C8.1343,40.3205 6.9621,39.5819 6.9273,38.4474 L6.8184,34.8894 C6.805,34.4513 6.6078,34.0414 6.2811,33.7492 C2.3896,30.2691 0,25.2307 0,19.4 C0,8.2528 8.7334,0 20,0 Z M7.99009,25.07344 C7.42629,25.96794 8.52579,26.97594 9.36809,26.33674 L15.67879,21.54734 C16.10569,21.22334 16.69559,21.22164 17.12429,21.54314 L21.79709,25.04774 C23.19919,26.09944 25.20039,25.73014 26.13499,24.24744 L32.00999,14.92654 C32.57369,14.03204 31.47419,13.02404 30.63189,13.66324 L24.32119,18.45264 C23.89429,18.77664 23.30439,18.77834 22.87569,18.45674 L18.20299,14.95224 C16.80079,13.90064 14.79959,14.26984 13.86509,15.75264 L7.99009,25.07344 Z"></path>\n                                    </g>\n                                </g>\n                            </svg>\n                        </g>\n                    </g>\n                </svg>\n            </div>\n        `);const u="messOpt"===facebookChatSettings.working_time.not_available_option&&facebookChatSettings.abTests.available_working_time_Aug_2021?`<div class="fb-mess-widget available-work-container ot-fb-hide">\n                <i class="fb-mess__close" onClick="closeNotAvailableOpt()">\n                    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0"\n                        width="10px" height="10px" viewBox="0 0 123.05 123.05" style="enable-background:new 0 0 123.05 123.05;"\n                        xml:space="preserve">\n                        <g>\n                            <path d="M121.325,10.925l-8.5-8.399c-2.3-2.3-6.1-2.3-8.5,0l-42.4,42.399L18.726,1.726c-2.301-2.301-6.101-2.301-8.5,0l-8.5,8.5\n                                c-2.301,2.3-2.301,6.1,0,8.5l43.1,43.1l-42.3,42.5c-2.3,2.3-2.3,6.1,0,8.5l8.5,8.5c2.3,2.3,6.1,2.3,8.5,0l42.399-42.4l42.4,42.4\n                                c2.3,2.3,6.1,2.3,8.5,0l8.5-8.5c2.3-2.3,2.3-6.1,0-8.5l-42.5-42.4l42.4-42.399C123.625,17.125,123.625,13.325,121.325,10.925z"/>\n                        </g>\n                    </svg>\n                </i>\n                <p class="fb-mess-widget__text">${convertHtml(facebookChatSettings.working_time.fb_messages)}</p>\n                <button style='background-color: ${a};' onClick="fbMessageNotAvailable()" id="unavailable-working-fb-chat">\n                <svg\n                    viewBox="0 0 40 40"\n                    x="0"\n                    y="0"\n                    width="16px"\n                    height="16px"\n                >\n                    <g\n                    stroke="none"\n                    strokeWidth=1\n                    fill="none"\n                    fillRule="evenodd"\n                    >\n                    <g>\n                        <svg x="0" y="0">\n                        <path\n                            d="M20,0 C31.2666,0 40,8.2528 40,19.4 C40,30.5472 31.2666,38.8 20,38.8 C17.9763,38.8 16.0348,38.5327 14.2106,38.0311 C13.856,37.9335 13.4789,37.9612 13.1424,38.1098 L9.1727,39.8621 C8.1343,40.3205 6.9621,39.5819 6.9273,38.4474 L6.8184,34.8894 C6.805,34.4513 6.6078,34.0414 6.2811,33.7492 C2.3896,30.2691 0,25.2307 0,19.4 C0,8.2528 8.7334,0 20,0 Z M7.99009,25.07344 C7.42629,25.96794 8.52579,26.97594 9.36809,26.33674 L15.67879,21.54734 C16.10569,21.22334 16.69559,21.22164 17.12429,21.54314 L21.79709,25.04774 C23.19919,26.09944 25.20039,25.73014 26.13499,24.24744 L32.00999,14.92654 C32.57369,14.03204 31.47419,13.02404 30.63189,13.66324 L24.32119,18.45264 C23.89429,18.77664 23.30439,18.77834 22.87569,18.45674 L18.20299,14.95224 C16.80079,13.90064 14.79959,14.26984 13.86509,15.75264 L7.99009,25.07344 Z"\n                            fill="#FFFFFF"\n                        />\n                        </svg>\n                    </g>\n                    </g>\n                </svg>\n                <span class="fb-mess-widget__btn-text">\n                    Leave us a message\n                </span>\n                </button>\n            </div>`:"",_="emailOpt"===facebookChatSettings.working_time.not_available_option&&facebookChatSettings.abTests.available_working_time_Aug_2021?`<div class="fb-email-form available-work-container ot-fb-hide">\n                <i class="fb-mess__close" onClick="closeNotAvailableOpt()">\n                    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                        width="10px" height="10px" viewBox="0 0 123.05 123.05" style="enable-background:new 0 0 123.05 123.05;"\n                        xml:space="preserve">\n                        <g>\n                            <path d="M121.325,10.925l-8.5-8.399c-2.3-2.3-6.1-2.3-8.5,0l-42.4,42.399L18.726,1.726c-2.301-2.301-6.101-2.301-8.5,0l-8.5,8.5\n                                c-2.301,2.3-2.301,6.1,0,8.5l43.1,43.1l-42.3,42.5c-2.3,2.3-2.3,6.1,0,8.5l8.5,8.5c2.3,2.3,6.1,2.3,8.5,0l42.399-42.4l42.4,42.4\n                                c2.3,2.3,6.1,2.3,8.5,0l8.5-8.5c2.3-2.3,2.3-6.1,0-8.5l-42.5-42.4l42.4-42.399C123.625,17.125,123.625,13.325,121.325,10.925z"/>\n                        </g>\n                    </svg>\n                </i>\n                <h3>Leave us a message</h3>\n                <div class="fb-email-form__email">\n                    <label for="otEmail">Email</label>\n                    <input type="text" id="otEmail" name="otEmail" />\n                </div>\n            <div  class="fb-email-form__subject">\n                <label for="otSubject">Subject</label>\n                    <input type="text" id="otSubject" name="otSubject" />\n            </div>\n                <div class="fb-email-form__textarea">\n                    <label for="otMessage">Message</label>\n                    <textarea\n                        type="text" id="otMessage" name="otMessage"\n                    />\n                </div>\n                <button class="fb-email-form__submit" style='background-color: ${a};' onClick="submitEmailForm()">\n                    Submit\n                </button>\n            </div>`:"",m=setInterval(()=>{OMGFBJquery(".fb_iframe_widget.fb_invisible_flow").length>0&&!OMGFBJquery(".fb_iframe_widget.fb_invisible_flow").hasClass("fb-customerchat")&&(OMGFBJquery(".fb_iframe_widget.fb_invisible_flow").addClass("fb-customerchat"),clearInterval(m))},50);setTimeout(()=>{OMGFBJquery(".fb-customerchat").children().length||OMGFBJquery("#fb-root .fb-customerchat").children().length||isCallEventFb||callInitFaceBook()},500);let p=0;const C=setInterval(()=>{p+=1,p>50&&clearInterval(C),window.FB&&windowWidth<1025&&(FB.XFBML.parse(),clearInterval(C))},50),k=setInterval(()=>{OMGFBJquery(".ot-fb-logo").addClass("omgfb-hidden-icon"),OMGFBJquery(".fb_dialog_content iframe").length&&OMGFBJquery(".ot-fb-logo").length&&(OMGFBJquery(".ot-fb-logo").removeClass("omgfb-hidden-icon"),clearInterval(k))});return b+=` ${h}\n        ${u}\n        ${_}`,b}function convertHtml(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function callInitFaceBook(){let t=!1;const e=()=>{FB.Event.subscribe("messenger_checkbox",(function(e){if("rendered"==e.event)console.log("Plugin was rendered"),trackingFrontWidgetCampaign("impression_addToCartWidget");else if("checkbox"==e.event){const o=e.state;if(t&&trackingFrontWidgetCampaign("click_addToCartWidget"),"checked"==o){if(FB.AppEvents.logEvent("MessengerCheckboxUserConfirmation",null,{app_id:appIdFB,page_id:facebookChatSettings.page_info.id,user_ref:uniqueRef,ref:refAddCartWidget}),OMGFBJquery(".ot-addcart-widget-notion").empty(),OMGFBJquery(".ot-addcart-widget-notion").text(""+(addCartWidgetSettings?addCartWidgetSettings.text_subscribed:"")),"product"===__st.p&&__st.rid){let t=__st.rid,e=shopFbChat+"_omgFbChatListProductChecked",o=localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):[];o.includes(t)||(o.push(t),localStorage.setItem(e,JSON.stringify(o)))}}else if("unchecked"==o){if(OMGFBJquery(".ot-addcart-widget-notion").empty(),OMGFBJquery(".ot-addcart-widget-notion").text(""+(addCartWidgetSettings?addCartWidgetSettings.text_not_subscribed_yet:"")),"product"===__st.p&&__st.rid&&t){let t=__st.rid,e=shopFbChat+"_omgFbChatListProductChecked",o=localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):[];o.includes(t)&&(o=o.filter(e=>e!=t),localStorage.setItem(e,JSON.stringify(o)))}t=!0}OMGFBJquery(".ot-addcart-widget").css("opacity","1"),console.log("Checkbox state: "+o)}else"not_you"==e.event?console.log("User clicked 'not you'"):"hidden"==e.event&&(console.log("Plugin was hidden"),OMGFBJquery(".ot-addcart-widget").css("display","none"))})),FB.Event.subscribe("customerchat.dialogShow",(function(){isDefaultMode&&trackingFrontWidgetCampaign("click_showFBMessageBox")})),FB.Event.subscribe("customerchat.dialogHide",(function(){isDefaultMode&&trackingFrontWidgetCampaign("click_showFBMessageBox")}))};var o,a,n,i,s;window.FB?(isCallEventFb||(isCallEventFb=!0,e()),FB.CustomerChat||(o=document,a="script",n="facebook-jssdk",s=o.getElementsByTagName(a)[0],o.getElementById(n)||((i=o.createElement(a)).id=n,i.src=`https://connect.facebook.net/${facebookChatSettings.language}/sdk/xfbml.customerchat.js`,s.parentNode.insertBefore(i,s)))):(window.fbAsyncInit=function(){FB.init({appId:appIdFB,autoLogAppEvents:!0,xfbml:!0,version:"v12.0"}),isCallEventFb||(isCallEventFb=!0,e())},function(t,e,o){var a,n=t.getElementsByTagName(e)[0];t.getElementById(o)||((a=t.createElement(e)).id=o,a.src=`https://connect.facebook.net/${facebookChatSettings.language}/sdk/xfbml.customerchat.js`,n.parentNode.insertBefore(a,n))}(document,"script","facebook-jssdk"))}function makeSettingsCustomerChat(){const t=facebookChatSettings.device_target;let e=!1,o=!1;if(facebookChatSettings.working_time){const t=facebookChatSettings.working_time;if("0"==t.status){let a="";const n={"-12":"Pacific/Midway","-11":"Pacific/Midway","-10":"Pacific/Honolulu","-9":"America/Anchorage","-8":"America/Los_Angeles","-7":"America/Cambridge_Bay","-6":"America/Mexico_City","-5":"America/Atikokan","-4":"Canada/Atlantic","-3":"America/Sao_Paulo","-2":"America/Noronha","-1":"Atlantic/Azores",0:"Europe/London",1:"Europe/Amsterdam",2:"Europe/Bucharest",3:"Asia/Baghdad",4:"Asia/Muscat",5:"Asia/Karachi",6:"Asia/Almaty",7:"Asia/Bangkok",8:"Asia/Hong_Kong",9:"Asia/Irkutsk",10:"Australia/Brisbane",11:"Asia/Vladivostok",12:"Pacific/Auckland"};a=Object.keys(n).indexOf(t.time_zone)>-1?n[t.time_zone]:t.time_zone;let i=(new Date).toLocaleString("en-US",{timeZone:a});i=new Date(i);const s=i.getFullYear(),c=i.getMonth(),r=i.getDay(),l=i.getHours(),d=i.getMinutes();let f;if(facebookChatSettings.weekdays){f=facebookChatSettings.weekdays;let t=[];for(const e of Object.values(f))t.push(parseInt(e.id));-1===t.indexOf(parseInt(r))&&(o=setAvailableWork())}const g=new Date(s,c,r,l,d).getTime();let b=t.start.split(":");const h=new Date(s,c,r,b[0],b[1]).getTime();let u=t.end.split(":");const _=new Date(s,c,r,u[0],u[1]).getTime();e=!(h<g&&_>g)&&setAvailableWork()}}o||e?(isNotAvailableWork=!0,iconChatClickUnavailable()):iconChatClickAvailable(),"1"==t?OMGFBJquery(".otFacbookChat").addClass("hide-mobile"):"2"==t&&OMGFBJquery(".otFacbookChat").addClass("hide-desktop")}function setAvailableWork(){return console.log("Facebook live chat by Omega: Not in the working days"),"noneOpt"===facebookChatSettings.working_time.not_available_option&&OMGFBJquery(".otFacbookChat").addClass("ot-fb-hide"),!0}function getStyleCustom(t=windowWidth){const e=setInterval(()=>{if(!isDefaultMode&&OMGFBJquery(".ot-fb-logo").length&&"auto"!==OMGFBJquery(".ot-fb-logo").css("z-index")&&OMGFBJquery(".ot-fb-logo").width()<t||isDefaultMode){OMGFBJquery(".OMG-style-button").remove();let o="",a="",n=parseInt(facebookChatSettings.position);const i=parseInt(facebookChatSettings.margin_bottom),s=1==facebookChatSettings.chat_type?" display: none !important;":"";if(""!==facebookChatSettings.custom_css){const t=facebookChatSettings.custom_css;t.status&&(o=t.code)}let c;switch(facebookChatSettings.tab_size){case"small":c=55;break;case"medium":c=65;break;case"large":c=75;break;default:c=80}const r=t<1025||isDefaultMode?60:OMGFBJquery(".ot-fb-logo").width(),l=(t-r)/100*parseInt(n);a+=`<style class="OMG-style-button" type='text/css'>\n                .otFacbookChat .available-work-container {\n                    left: ${(t-OMGFBJquery(".available-work-container").width())/100*parseInt(n)+"px !important;"};\n                    bottom: ${i+c+6}px !important;\n                }\n                \n                .fb_dialog .fb_dialog_content {\n                    ${isDefaultMode?"":"opacity: 0.002!important;"}\n                }\n\n                .fb-customerchat.fb_iframe_widget iframe {\n                    bottom: ${i+c}px !important;\n                }\n                \n                .facebook-chat-button-custom,\n                .ot-fb-logo.facebook-chat-button,\n                .fb_dialog .fb_dialog_content iframe {\n                    bottom: ${i}px !important;\n                    left: ${l}px !important;\n                }\n                \n                .ot-fb-logo.facebook-chat-button {\n                    direction: ${n>50?"rtl":"ltr"};\n                }\n                \n                @media screen and (max-width: 1025px) {\n                    .fb-customerchat.fb_iframe_widget iframe {\n                        left: auto !important;\n                        bottom: ${i+50}px !important;\n                        ${s}\n                    }\n                    \n                    .fb_dialog .fb_dialog_content iframe,\n                    .fb_dialog .fb_dialog_content #_no-clickjacking-0,\n                    .fb_dialog .fb_dialog_content #_no-clickjacking-1 {\n                        ${s}\n                    }\n                \n                    .fb_dialog.fb_dialog_mobile  {\n                        bottom: ${i}px!important;\n                    }\n                }\n                \n                ${o}\n            </style>`,OMGFBJquery(".otFacbookChat").append(a),clearInterval(e)}},50)}function closeNotAvailableOpt(){OMGFBJquery(".available-work-container").removeClass("ot-fb-flex").addClass("ot-fb-hide")}function submitEmailForm(){const t=OMGFBJquery(".fb-email-form__email input").val(),e=OMGFBJquery(".fb-email-form__subject input").val(),o=OMGFBJquery(".fb-email-form__textarea textarea").val();return new Promise(a=>{OMGFBJquery.ajax({url:rootLinkChat+"backend/storefront/facebook-message.php",data:{email:t,subject:e,message:o,action:"sendMessage",shop:shopFbChat},dataType:"JSON",type:"POST"}).done((function(t){}))})}function fbMessageNotAvailable(){OMGFBJquery(document).on("click","#unavailable-working-fb-chat",(function(){processFbBoxChat("not-available")}))}function trackingFrontWidgetCampaign(t){return new Promise(e=>{OMGFBJquery.ajax({url:rootLinkChat+"backend/storefront/facebook-message.php",data:{action:"trackingFrontWidgetCampaign",type:t,shop:shopFbChat},dataType:"JSON",type:"POST"}).done((function(t){}))})}function processFbBoxChat(t=""){OMGFBJquery("#fb-root").addClass("ot-fb-show").removeClass("ot-fb-hide"),"not-available"===t&&closeNotAvailableOpt();const e=OMGFBJquery(".fb-customerchat.fb_invisible_flow.fb_iframe_widget iframe");if(windowWidth<1025){if(OMGFBJquery(".ot-fb-logo.redirect_icon").length>0){let t=facebookChatSettings.page_info.id;window.open("https://www.messenger.com/t/"+t,"_blank")}}else OMGFBJquery(".fb-customerchat").children().length||(FB.Event.subscribe("customerchat.show",processShowDialog("callToGetPopup")),window.OMGFBisGetPopup="getPopup"),e.hasClass("fb_customer_chat_bounce_out_v2")||!e.hasClass("fb_customer_chat_bounce_out_v2")&&!e.hasClass("fb_customer_chat_bounce_in_v2")?FB.Event.subscribe("customerchat.show",processShowDialog(OMGFBisGetPopup)):FB.Event.subscribe("customerchat.hide",processHideDialog(OMGFBisGetPopup)),trackingFrontWidgetCampaign("click_showFBMessageBox")}function processShowDialog(t=""){!t&&FB.CustomerChat&&(FB.CustomerChat.show(!0),FB.AppEvents.logEvent("OMGFB_CHAT_TEST")),"callToGetPopup"==t&&FB.XFBML.parse(),omgFBAddRemoveClassShowHide()}function processHideDialog(t=""){!t&&FB.CustomerChat&&FB.CustomerChat.hideDialog(),omgFBAddRemoveClassShowHide("remove")}function omgFBAddRemoveClassShowHide(t="add"){const e="remove"===t?"0":"calc(100% - 80px)",o="remove"===t?"fb_customer_chat_bounce_out_v2":"fb_customer_chat_bounce_in_v2",a="remove"===t?"fb_customer_chat_bounce_in_v2":"fb_customer_chat_bounce_out_v2",n=setInterval(()=>{let i=OMGFBJquery(".fb-customerchat.fb_invisible_flow.fb_iframe_widget iframe");i.length&&("add"===t&&setTimeout(()=>{i=OMGFBJquery(".fb-customerchat.fb_invisible_flow.fb_iframe_widget iframe"),"fb_bounce_in_v2"===i.css("animation-name")&&i.width()>247&&i.addClass("omg-fb-set-height")},250),i.css("max-height",e),i.removeClass(a).addClass(o),clearInterval(n))},50)}